$('#login-button').click(function (event) {
    var pwd = document.getElementById("pwd").value;
    if (pwd == "0605") {
        event.preventDefault();
        $('form').fadeOut(500);
        $('#timer').fadeOut(500);
        $('.wrapper').addClass('form-success');
        setTimeout(function () {
            location.href = "fireworks.html";
        }, 2000);
    } else {
        alert("密码是你的生日哦(密码为四位数)");
    }
});

function show_date_time() {
    window.setTimeout("show_date_time()", 1000);
    BirthDay = new Date("06/05/1999 00:00:00");//这个日期是可以修改的
    today = new Date();
    timeold = (today.getTime() - BirthDay.getTime());
    sectimeold = timeold / 1000
    secondsold = Math.floor(sectimeold);
    msPerDay = 24 * 60 * 60 * 1000
    e_daysold = timeold / msPerDay
    daysold = Math.floor(e_daysold);
    e_hrsold = (e_daysold - daysold) * 24;
    hrsold = Math.floor(e_hrsold);
    e_minsold = (e_hrsold - hrsold) * 60;
    minsold = Math.floor((e_hrsold - hrsold) * 60);
    seconds = Math.floor((e_minsold - minsold) * 60);
    span_dt_dt.innerHTML = daysold + "天" + hrsold + "小时" + minsold + "分" + seconds + "秒";
}
show_date_time();

function playMusic() {
    let audio = new Audio('path_to_your_birthday_song.mp3');
    audio.play();
}

function showConfetti() {
    confetti({
        particleCount: 100,
        spread: 70,
        origin: { y: 0.6 }
    });
}

function showForm() {
    document.getElementById('form-popup').style.display = 'block';
}

function closeForm() {
    document.getElementById('form-popup').style.display = 'none';
}

function submitMessage() {
    const name = document.getElementById('name').value;
    const message = document.getElementById('message').value;
    if (name && message) {
        addDanmaku(`${name}: ${message}`);
        
        // Reset form and close popup
        document.getElementById('name').value = '';
        document.getElementById('message').value = '';
        closeForm();
    } else {
        alert('请填写名字和祝福内容');
    }
}

function addDanmaku(message) {
    const danmakuContainer = document.getElementById('danmaku-container');
    const newMessage = document.createElement('div');
    newMessage.className = 'danmaku';
    newMessage.textContent = message;
    
    // Randomize vertical position
    const topPosition = Math.random() * (danmakuContainer.clientHeight - 30);
    newMessage.style.top = `${topPosition}px`;

    danmakuContainer.appendChild(newMessage);

    // Remove message after animation
    setTimeout(() => {
        danmakuContainer.removeChild(newMessage);
    }, 10000);
}

function addDefaultDanmaku(message) {
    const danmakuContainer = document.getElementById('danmaku-container');
    const newMessage = document.createElement('div');
    newMessage.className = 'danmaku';
    newMessage.textContent = message;
    newMessage.style.animation = 'danmaku-move 10s linear infinite';
    
    // Fixed vertical position
    const topPosition = 50; // Change this value to your desired position
    newMessage.style.top = `${topPosition}px`;

    danmakuContainer.appendChild(newMessage);
}

// Add a default danmaku on page load
window.onload = function() {
    addDefaultDanmaku("小散：身体嘎嘎棒,颜值嘎嘎高,球技嘎嘎猛！");
};
